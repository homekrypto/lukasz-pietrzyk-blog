# Coqui TTS Voice Assistant Setup Guide

## Overview
This guide will help you set up a high-quality voice assistant using Coqui TTS (open-source) for the Łukasz Pietrzyk website. The assistant provides natural-sounding Polish speech synthesis with much better quality than browser-based Web Speech API.

## Architecture
- **Frontend**: React component (`CoquiVoiceAssistant.tsx`)
- **Backend**: Python Flask server using Coqui TTS (`tts_server_enhanced.py`)
- **Communication**: REST API between frontend and backend

## Prerequisites
- Python 3.8 or higher
- Node.js and npm (for the React frontend)
- At least 4GB RAM (TTS models can be memory-intensive)
- Internet connection for initial model download

## Installation Steps

### 1. Backend Setup

Navigate to the backend directory:
```bash
cd backend
```

**Option A: Automated Setup (Recommended)**
```bash
# Make the setup script executable (if not already)
chmod +x setup.sh

# Run the setup script
./setup.sh
```

**Option B: Manual Setup**
```bash
# Create virtual environment
python3 -m venv venv

# Activate virtual environment
source venv/bin/activate

# Upgrade pip
pip install --upgrade pip

# Install requirements
pip install -r requirements.txt
```

### 2. Start the Backend Server

```bash
# Make sure you're in the backend directory with virtual environment activated
cd backend
source venv/bin/activate

# Start the server
python tts_server_enhanced.py
```

**First Run Notes:**
- The first startup will take several minutes as it downloads the TTS model (can be 1-2GB)
- The server will show "TTS model is initializing in the background..."
- Check the logs for progress
- The server runs on `http://localhost:5000`

### 3. Frontend Setup

In a new terminal, navigate to the main project directory:
```bash
cd /Users/michalbabula/Documents/LukaszPietrzyk-Website

# Install dependencies (if not already done)
npm install

# Start the development server
npm run dev
```

## Usage

1. **Start the backend server** (Step 2 above)
2. **Start the frontend** (Step 3 above)
3. **Open your browser** and go to the frontend URL (usually `http://localhost:5173`)
4. **Click the voice assistant button** in the hero section
5. **Wait for the greeting** "Jak Ci mogę pomóc?" (in high-quality Polish voice)
6. **Speak your question** in Polish
7. **Listen to the response** generated by Coqui TTS

## Features

### High-Quality Polish TTS
- Uses Coqui's XTTS v2 model with Polish language support
- Much better quality than browser Web Speech API
- Natural-sounding male voice (configurable)

### Voice Recognition
- Uses browser's Web Speech API for speech recognition
- Supports Polish language
- Continuous listening mode

### Intelligent Responses
- Context-aware responses about coaching and mentoring
- Covers topics like career development, business coaching, personal growth
- Handles greetings, questions about services, pricing, and contact information

## API Endpoints

### Backend Server (`http://localhost:5000`)

- **GET /health** - Check server health and model status
- **POST /tts** - Convert text to speech
- **GET /available_models** - List available TTS models

### Example API Usage

```bash
# Check if server is ready
curl http://localhost:5000/health

# Generate speech
curl -X POST http://localhost:5000/tts \
  -H "Content-Type: application/json" \
  -d '{"text": "Witaj! Jak mogę Ci pomóc?"}'
```

## Troubleshooting

### Backend Issues

**"TTS model not initialized"**
- Wait longer for the model to download and initialize
- Check the server logs for errors
- Ensure you have enough RAM (at least 4GB recommended)

**"Connection refused"**
- Make sure the backend server is running on port 5000
- Check if another process is using port 5000

**"Module not found" errors**
- Ensure you activated the virtual environment: `source venv/bin/activate`
- Reinstall requirements: `pip install -r requirements.txt`

### Frontend Issues

**"Serwer TTS nie jest dostępny"**
- Ensure the backend server is running
- Check the backend URL in the component (default: `http://localhost:5000`)
- Verify there are no CORS issues

**Voice recognition not working**
- Use a modern browser (Chrome, Firefox, Safari)
- Ensure microphone permissions are granted
- Try using HTTPS if possible

## Model Information

The system tries to load models in this order:
1. **XTTS v2** - High-quality multilingual model with Polish support
2. **Polish Mai Female** - Dedicated Polish female voice
3. **YourTTS** - Voice cloning capable model

## Performance Optimization

### For Production
- Use a dedicated server with GPU for faster TTS generation
- Implement caching for common phrases
- Use streaming TTS for longer texts
- Set up proper error handling and logging

### For Development
- The current setup works well for development and testing
- First model load takes time, but subsequent requests are faster
- Monitor RAM usage during development

## Customization

### Voice Configuration
Edit `tts_server_enhanced.py` to:
- Change voice models
- Adjust speech rate, pitch, and volume
- Add voice cloning capabilities

### Response Content
Edit `CoquiVoiceAssistant.tsx` to:
- Modify the response logic in `generateResponse()`
- Add new conversation topics
- Customize the user interface

## Production Deployment

For production deployment:
1. Use a production WSGI server (e.g., Gunicorn)
2. Set up proper security (HTTPS, authentication)
3. Use environment variables for configuration
4. Implement proper logging and monitoring
5. Consider using a GPU server for better performance

## Cost Comparison

- **Coqui TTS**: Free, open-source, runs locally
- **ElevenLabs**: ~$22/month for premium voices
- **Azure TTS**: ~$4 per 1M characters
- **OpenAI TTS**: ~$15 per 1M characters

## Support

If you encounter issues:
1. Check the server logs in the terminal
2. Verify all dependencies are installed
3. Ensure the virtual environment is activated
4. Check the browser console for frontend errors

This setup provides professional-quality voice synthesis completely free and open-source!
